<!DOCTYPE html>
<html>
    <head>
        <!-- Benchmark function imports -->
        <script src="CirclesUniformSize.js"></script>
        <!-- Benchmark execution and timing -->
        <script>
            function main() {
                var canvas = document.getElementById("cnv");
                var context = canvas.getContext("2d");
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                
                // select benchmark function                
                var benchmark = location.search.match(/\?benchmark=(.*)/i)[1];
                var func;
                // select benchmark function 
                switch (benchmark) {
                    case "CirclesUniformSize":
                        func = CirclesUniformSize;
                        break;
                    default:
                        console.log(benchmark + " is not a recognized benchmark function");
                        return;
                }
                time(func, context);
            }

/*            function loop(num, func, context) {
                    if (num != 0) {
                        var start = new Date().getTime();
                        func(1000, context);
                        var end = new Date().getTime();
                        console.log(end - start);

                        console.log(num);
                        setTimeout(loop(num - 1, func, context), 100000);
                    } else
                        return;
                }();
            }*/

            // execute benchmark function, time
            function time(func, context) {
                (function loop(num, func, context) {
                    setTimeout(function() {
                        if(num != 0) {
                            var start = new Date().getTime();
                            func(1000, context);
                            var end = new Date().getTime();
                            console.log(end - start);
                            
                            loop(num - 1, func, context);
                         } else
                            return
                         }, 100);})(100, func, context);
            }
        </script>
        <style>
            body {
                margin: 0px;
                padding: 0px;
            }
        </style>
    </head>
    <body onload="main()">
        <canvas id="cnv" width="100" height="100"></canvas>
    </body>
</html>
